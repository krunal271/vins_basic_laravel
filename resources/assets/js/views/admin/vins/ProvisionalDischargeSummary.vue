<template>
<div class="container">
  <div class="page-header">
    <div class="row">
      <div class="col-md-6">
      <h1>Provisional Discharge Summary</h1>
      </div>
      <div class="col-md-6">
        <div class="text-right">
          DOC NO. F/IPD/09 <br>
          REV. No. 0.1 <br>
          WEF 25-03-2017
        </div>
      </div>
    </div>
  </div>

	<form action="" method="post">
		<div class="row form-group">
			  <div class="col-md-8">
          <div class="row form-group">
            <div class="col-md-4">
              <label class="control-label" for="address">Address :</label>
            </div>
            <div class="col-md-8">
              <input type="text" name="address"  rows="3" class="form-control" value="" v-model="provisionalDischargeSummaryData.address">
            </div>
          </div>
          <div class="row form-group">
            <div class="col-md-6">
              <label class="control-label" for="date_of_discharge">Date of Discharge :</label>
            </div>
            <div class="col-md-6">
              <input type="date"  name="date_of_discharge" class="form-control" value="" v-model="provisionalDischargeSummaryData.date_of_discharge">
            </div>
          </div>
				</div>
			  <div class="col-md-4 text-right">
					<textarea name="addressograph"  rows="3" class="form-control" placeholder="Addressograph Here"></textarea>
				</div>
			</div>
			<hr>
			<div class="row form-group">
        <div class="col-md-6">
          <div class="col-md-6">
            <label>Referred By : </label>
          </div>
          <div class="col-md-6">
            <input type="text"  name="ref_by" class="form-control" value="" v-model="provisionalDischargeSummaryData.ref_by">
          </div>
        </div>
        <div class="col-md-6">
          <div class="col-md-6">
            <label>Room No. : </label>
          </div>
          <div class="col-md-6">
            <input type="text"  name="room_no" class="form-control" value="" v-model="provisionalDischargeSummaryData.room_no">
          </div>
        </div>
			</div>
      <hr>
      <div class="row form-group">
        <div class="col-md-4">
          <label class="control-label" for="address">Diagnosis :</label>
        </div>
        <div class="col-md-8">
          <input type="text" name="diagnosis"  rows="3" class="form-control" value="" v-model="provisionalDischargeSummaryData.diagnosis">
        </div>
      </div>

      <div class="row form-group">
        <div class="col-md-4">
          <label class="control-label" for="address">Condition on discharge :</label>
        </div>
        <div class="col-md-8">
          <input type="text" name="condition_on_discharge"  rows="3" class="form-control" value="" v-model="provisionalDischargeSummaryData.condition_on_discharge">
        </div>
      </div>

      <div class="row form-group">
        <div class="col-md-4">
          <label class="control-label" for="address">Advice on discharge :</label>
        </div>
        <div class="col-md-8">
          <input type="text" name="advice_on_discharge"  rows="4" class="form-control" value="">
        </div>
      </div>

      <div class="row form-group">
        <div class="col-md-4">
          <label class="control-label" for="address">Followup :</label>
        </div>
        <div class="col-md-8">
          <input type="text" name="followup"  rows="2" class="form-control" value="" v-model="provisionalDischargeSummaryData.followup">
        </div>
      </div>

      <div class="row form-group">
        <h3>Collect final discharge summary</h3>
      </div>
      <div class="row form-group">
        <div class="col-md-6">
          <label class="control-label" for="collect_discharge_summary_on">On Date:</label>
        </div>
        <div class="col-md-6">
          <input type="date"  name="collect_discharge_summary_on" class="form-control" value="" v-model="provisionalDischargeSummaryData.collect_discharge_summary_on">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-6">
          <label class="control-label" for="collect_discharge_summary_at">At:</label>
        </div>
        <div class="col-md-6">
          <input type="text"  name="collect_discharge_summary_at" class="form-control" value="" v-model="provisionalDischargeSummaryData.collect_discharge_summary_at">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-6">
          <label class="control-label" for="collect_discharge_summary_from">From:</label>
        </div>
        <div class="col-md-6">
          <input type="text"  name="collect_discharge_summary_from" class="form-control" value="" v-model="provisionalDischargeSummaryData.collect_discharge_summary_from">
        </div>
      </div>

			<div class="form-group text-center">
				<button class="btn btn-success" type="submit" @click = "saveProvisionalDischargeSummary()">Submit</button>
			</div>
		</form>
	</div>
</body>
</template>


<script >
	import User from '../../../api/users.js';
    export default {
        data() {
            return {
                'footer' : 'footer',
                'currentYear': new Date().getFullYear(),
                'provisionalDischargeSummaryData' : {
                    'address' :'',
                    'date_of_discharge' :'',
                    'addressograph' :'',
                    'ref_by' :'',
                    'room_no' :'',
                    'diagnosis' :'',
                    'condition_on_discharge' :'',
                    'advice_on_discharge' :'',
                    'followup' :'',
                    'collect_discharge_summary_on' :'',
                    'collect_discharge_summary_at' :'',
                    'collect_discharge_summary_from' :'',
                }
            }
        },
        methods: {
		    GetSelectComponent(componentName) {
		       this.$router.push({name: componentName})
		    },
		    saveProvisionalDischargeSummary() {
		    	this.$validator.validateAll().then(
	            (response) => {
	            	if (!this.errors.any()) {
	            		 $("body .js-loader").removeClass('d-none');
				    	User.saveProvisionalDischargeSummary(this.provisionalDischargeSummaryData).then(
		                (response) => {
		                	if(response.data.code == 200) {
		                		toastr.success('Patient details have been saved', 'patient detail', {timeOut: 5000});
		                	}
		                	 $("body .js-loader").addClass('d-none');

		                },
		                (error) => {
		                	 $("body .js-loader").addClass('d-none');

		                }
		                )
			    	}
			    },
                (error) => {
                }
                )

			}
		  },

    }
</script>
